<f:layout name="Default" />

<f:section name="main">
  <h1>{rent.name}</h1>

  <f:flashMessages renderMode="div" />

  <f:link.action action="list" class="btn btn-primary pull-left">Retourer à la liste des locations</f:link.action>
  <f:link.action action="new" controller="Booking" class="btn btn-success pull-right" arguments="{rent:rent}">Nouvelle resérvation</f:link.action>
  <f:comment><f:link.action action="listByRent" controller="Booking" arguments="{rent:rent}">List Booking</f:link.action>
    <f:link.action action="new" controller="Price" class="btn btn-success" arguments="{rent:rent}">New Price</f:link.action>
    <f:link.action action="list" controller="Price" class="btn btn-primary" arguments="{rent:rent}">List Price</f:link.action>
  </f:comment>
  <div id='calendar' style="margin-top: 60px;"></div>

  <script>

    $(document).ready(function() {

      var allSettings = '{json->f:format.htmlentitiesDecode(keepQuotes: 0)}';
      var settings = $.parseJSON(allSettings);

      $('#calendar').fullCalendar({
        header: {
          left: 'prev,next today',
          center: 'title',
          right: 'month,basicWeek,basicDay'
        },
        lang: 'fr',
        editable: true,
        eventLimit: true, // allow "more" link when too many events
        events: settings,
        dayClick: function(date, event) {
          $('#modal-new-booking').find('.modal-body input#beginDate').val(date);
          $('#modal-new-booking').modal('show');
        }
      });

    });

  </script>


    <!-- Button trigger modal -->
  <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#modal-new-booking">
    Launch demo modal
  </button>

  <!-- Modal -->
  <div class="modal fade" id="modal-new-booking" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel"><f:translate key="tx_hotelbooking_domain_model_booking.new"/></h4>
        </div>
        <div class="modal-body">
          <f:render partial="FormErrors" arguments="{object:Booking}" />

          <f:form action="create"  name="newBooking" object="{newBooking}">
            <f:render partial="Booking/FormFields" /> 

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <f:form.submit class="btn btn-default" value="{f:translate(key:'tx_hotelbooking_domain_model_booking.submit')}" />
                </div>
            </div>
          </f:form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

</f:section>